image: Visual Studio 2017
init:
  - git config --global core.autocrlf input
clone_depth: 10
before_build:
  - ps: Set-PSRepository -Name PSGallery -InstallationPolicy Trusted
  - ps: Install-Module VSSetup -Scope CurrentUser
  # - ps: Invoke-WebRequest https://raw.githubusercontent.com/Microsoft/visualfsharp/master/scripts/Install-VisualFSharpNightly.ps1 -OutFile Install-VisualFSharpNightly.ps1
  - ps: ./Install-VisualFSharpNightly.ps1 -Quiet
build_script:
  - ps: |
      dotnet --version
      .\build.ps1
      if ($lastexitcode -ne 0){ exit $lastexitcode }
test: off
artifacts:
  - path: bin\*.nupkg